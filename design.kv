CustomScreenManager:
    MainScreen:
    AboutScreen:
    SettingScreen:

<MainScreen>
    name: 'main_screen'
    size: root.width, root.height
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        CustomTabbedPannel:
        #BoxLayout:
            Label:
                pos_hint: {'x':0.5, 'y':0.35}
                text: 'Hybrid power supply system'
                font_size: 32
                outline_color: (0.5, 0.5, 0.5, 0.7)
                outline_width: 2
                color: (0, 1, 0, 0.5)
        BoxLayout:
            size_hint: (1, 0.8)
            padding: 20
            spacing: 10
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                Rectangle: 
                    pos: self.pos
                    size: self.size  
            CustomBoxLayout:
                title: 'Hybrid'
                plant_type: 'hybrid'
                image_source: 'images/hybrid2.png'
            CustomBoxLayout:
                title: 'Grid'
                plant_type: 'grid'
                image_source: 'images/grid.jpeg'
            CustomBoxLayout:
                title: 'Solar'
                plant_type: 'solar'
                image_source: 'images/solar1.jpg'
            BatteryCustomBoxLayout:
                title: 'Fuel cells'
                plant_type: 'battery'
                image_source: 'images/battery.jpg'

        BoxLayout:
            size_hint: (1, 0.5)
            padding: 10
            spacing: 10
            canvas.before:
                Color:
                    rgba: (0, 0, 0, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            BoxLayout:
                background_color: (1, 1, 1, 1)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: 'Load'
                    bold: True
                    color: (0, 0, 0)

            GraphBox:

<BatteryCustomBoxLayout@BoxLayout>
    padding: 10
    spacing: 20
    orientation: 'vertical'
    #size_hint_y: None
    #height: '430dp'
    #pos_hint: {'center_x':.5, 'y':0.1}
    background_color: (50/255, 165/255 ,40/255 ,0.5)
    image_source: ''
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    title: 'title'
    plant_type: ''
    BoxLayout:
        size_hint: (1, 0.2)
        #height: '70dp'
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: root.title
            size_hint_y: None
            height: '30dp'
            text_align: 'left'
            bold: True
            font_size: 24
            outline_color: (0.5, 0.5, 0.5, 1)
            outline_width: 1
            #pos_hint: {'x':0, 'y':0.5}

    Image:
        size_hint: (1, 0.5)
        source: root.image_source
        allow_stretch: True
        keep_ratio: False
        size_hint: (1, 0.5)
    GridLayout:
        cols: 3
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle:
                pos: self.pos
                size: self.size
                #size_hint: (1, 0.1)
        Label:
            text: 'Capacity:'
        Label:
            text: '7.2AH'
            bold: True
            color: (0, 1, 0)
        Label:
            text: ' @ 12V'
            bold: True
            color: (0, 1, 0)
    BoxLayout:
        size_hint: (1, 0.2)



<CustomBoxLayout@BoxLayout>
    padding: 10
    spacing: 20
    orientation: 'vertical'
    background_color: (50/255, 165/255 ,40/255 ,0.5)
    image_source: ''
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle: 
            pos: self.pos
            size: self.size
    title: 'title'
    plant_type: ''
    BoxLayout:
        size_hint: (1, 0.15)
        #height: '70dp'
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle: 
                pos: self.pos
                size: self.size
        Label:
            text: root.title
            size_hint_y: None
            height: '30dp'
            text_align: 'left'
            bold: True
            font_size: 24
            outline_color: (0.5, 0.5, 0.5, 1)
            outline_width: 1
            #pos_hint: {'x':0, 'y':0.5}
        Dot:
            id:dot_id
    Image: 
        size_hint: (1, 0.3)
        source: root.image_source
        allow_stretch: True
        keep_ratio: False
        size_hint: (1, 0.5)

    GridLayout:
        cols: 1
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle: 
                pos: self.pos
                size: self.size
                #size_hint: (1, 0.1)
        Label:
            size_hint: (1, 0.1)
            text: 'Parameters'
            pos_hint: {'center_x': 0.2}
            color: (0, 0, 0)
            bold: True
        GridLayout:
            cols: 2
            Label:
                text: 'Voltage(V):'
                halign: 'left'
            Label:
                text: '0.0'
                bold: True
                color: (0, 1, 0)
            Label:
                text: 'Capacity(Watt)'
                halign: 'right'
                font_type: 'forte'

            TextInput:
                text: '0'
                bold: True
                font_size: 24
                halign: 'right'
                pos_hint: {'center_x':0.5}
            Label:
                text: 'Available(Watt)'
                text_align: 'left'
            TextInput:
                text: '0'
                bold: True
                font_size: 24
                halign: 'right'
    BoxLayout:
        size_hint: (1, 0.1)
        CustomToggleButton:
            on_press: 
                app.root.on_off(self, self.state, dot_id, root.plant_type)

<CustomToggleButton@ToggleButton>
    size_hint_y: None
    height: '30dp'
    text: 'ON'
    state: 'normal'
    background_color: (0, 0, 0, 0)
    custom_background_color: (1, 0, 0, 0.5)
    canvas.before:
        Color:
            rgba: self.custom_background_color
        RoundedRectangle: 
            pos: self.pos
            size: self.size
            radius: [20]
    
<Dot@Label>
    size_hint: (None, None)
    size: ('50dp', '50dp')
    pos_hint: {'center_x': 0.9, 'y':0.6}
    background_color: (1, 0, 0, 1)
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle: 
            pos: self.pos
            size: self.width/2, self.height/2
            radius: [100]

<GraphBox@BoxLayout>
    id: ''
    Graph:
        id: root.id
        xlabel: 'Time(s)'
        ylabel: 'Voltage(v)'
        xmin: 0
        xmax: 60
        ymin: 0
        ymax: 250
        x_ticks_minor: 1
        x_ticks_major: 5
        y_ticks_minor: 1
        y_ticks_major: 20
        x_grid: True
        y_grid: True
        x_grid_label: True
        y_grid_label: True
        # tick_color: (1, 0, 0, 1)
