CustomScreenManager:
    MainScreen:
    AboutScreen:
    SettingScreen:

<MainScreen>
    name: 'main_screen'
    size: root.width, root.height
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        CustomTabbedPannel:
        #BoxLayout:
            Label:
                pos_hint: {'x':0.5, 'y':0.35}
                text: 'Hybrid power supply system'
                font_size: 32
                outline_color: (0.5, 0.5, 0.5, 0.7)
                outline_width: 2
                color: (0, 1, 0, 0.5)
        BoxLayout:
            size_hint: (1, 0.7)
            padding: 20
            spacing: 10
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                Rectangle: 
                    pos: self.pos
                    size: self.size  
            CustomBoxLayout:
                title: 'Hybrid'
                image_source: 'images/hybrid2.png'
            CustomBoxLayout:
                title: 'Wind'
                image_source: 'images/wind2.jpg'
            CustomBoxLayout:
                title: 'Solar'
                image_source: 'images/solar1.jpg'
            CustomBoxLayout:
                title: 'Battery'
                image_source: 'images/battery.jpg'

<CustomBoxLayout@BoxLayout>
    padding: 10
    spacing: 10
    orientation: 'vertical'
    #size_hint_y: None
    #height: '430dp'
    #pos_hint: {'center_x':.5, 'y':0.1}
    background_color: (50/255, 165/255 ,40/255 ,0.5)
    image_source: ''
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle: 
            pos: self.pos
            size: self.size
    title: 'title'
    BoxLayout:
        size_hint: (1, 0.1)
        #height: '70dp'
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle: 
                pos: self.pos
                size: self.size
        Label:
            text: root.title
            size_hint_y: None
            height: '30dp'
            text_align: 'left'
            bold: True
            font_size: 24
            outline_color: (0.5, 0.5, 0.5, 1)
            outline_width: 1
            #pos_hint: {'x':0, 'y':0.5}
        Dot:
            id:dot_id
    Image: 
        size_hint: (1, 0.4)
        source: root.image_source
        allow_stretch: True
        keep_ratio: False
        size_hint: (1, 0.5)
    Label:
        size_hint: (1, 0.1)
        text: 'Capacity(watts)'
        font_size: 20
        pos_hint: {'center_x': 0.5}
    GridLayout:
        size_hint: (1, 0.15)
        #height: '100dp'
        cols: 2
        canvas.before:
            Color:
                rgba: (0, 0, 0, 0.5)
            Rectangle: 
                pos: self.pos
                size: self.size
        Label:
            text: 'Total'
            halign: 'right'
        TextInput:
            text: '0'
            bold: True
            font_size: 24
            halign: 'right'
            pos_hint: {'center_x':0.5}
        Label:
            text: 'Available'
            text_align: 'left'
        TextInput:
            text: '0'
            bold: True
            font_size: 24
            halign: 'right'
    BoxLayout:
        size_hint: (1, 0.1)
        spacing: 20
        padding: 0
        CustomToggleButton:
            on_press: 
                app.root.on_off(self, self.state, dot_id)
                app.root.on_off(self, self.state, dot_id)

        
<CustomToggleButton@ToggleButton>
    size_hint_y: None
    height: '50dp'
    text: 'ON'
    state: 'normal'
    background_color: (0, 0, 0, 0)
    custom_background_color: (1, 0, 0, 0.5)
    canvas.before:
        Color:
            rgba: self.custom_background_color
        RoundedRectangle: 
            pos: self.pos
            size: self.size
            radius: [20]
    
<Dot@Label>
    size_hint: (None, None)
    size: ('50dp', '50dp')
    pos_hint: {'center_x': 0.9, 'y':0.6}
    background_color: (1, 0, 0, 1)
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle: 
            pos: self.pos
            size: self.width/2, self.height/2
            radius: [100]

